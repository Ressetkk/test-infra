# Code generated by rendertemplates. DO NOT EDIT.


presubmits:
  kyma-project/test-infra:
    - name: pull-gcbuild-validate
      annotations:
        description: "Job that runs static checks on all gcbuild-related cloudbuild.yaml files"
      run_if_changed: '.*cloudbuild\.yaml$'
      decorate: true
      cluster: trusted-workload
      branches:
        - ^main$
      spec:
        containers:
          - image: eu.gcr.io/sap-kyma-neighbors-dev/gcbuild:v20220823-ac6a7cfb
            command:
              - /gcbuild-lint
            args:
              - --from-git
    - name: pull-gcbuild-bootstrap
      annotations:
        description: "Workload to build image for kyma-project/test-infra/bootstrap."
      labels:
        preset-sa-gcr-push: "true"
      run_if_changed: 'prow/images/bootstrap/(.*\.go$|.*/Dockerfile$)'
      decorate: true
      cluster: untrusted-workload
      branches:
        - ^main$
        - ^master$
      spec:
        containers:
          - image: eu.gcr.io/sap-kyma-neighbors-dev/gcbuild:v20220823-ac6a7cfb
            command:
              - "/run.sh"
            args:
              - "--config=/config/gcbuild-config.yaml"
              - "--build-dir=prow/images/bootstrap"
              - "--cloudbuild-file=cloudbuild.yaml"
            volumeMounts:
              - name: config
                mountPath: /config
                readOnly: true
        volumes:
          - name: config
            configMap:
              name: gcbuild-config
postsubmits:
  kyma-project/test-infra:
    - name: post-gcbuild-bootstrap
      annotations:
        description: "Workload to build image for kyma-project/test-infra/bootstrap."
      labels:
        preset-sa-gcr-push: "true"
      run_if_changed: 'prow/images/bootstrap/(.*\.go$|.*/Dockerfile$)'
      decorate: true
      cluster: trusted-workload
      branches:
        - ^main$
        - ^master$
      spec:
        containers:
          - image: eu.gcr.io/sap-kyma-neighbors-dev/gcbuild:v20220823-ac6a7cfb
            command:
              - "/run.sh"
            args:
              - "--config=/config/gcbuild-config.yaml"
              - "--build-dir=prow/images/bootstrap"
              - "--cloudbuild-file=cloudbuild.yaml"
            volumeMounts:
              - name: config
                mountPath: /config
                readOnly: true
        volumes:
          - name: config
            configMap:
              name: gcbuild-config
